<h1 class="title">AM-CAN Kata Registration</h1>
<form (ngSubmit)="onSubmit()" #kataForm="ngForm">
  <div style="display:flex; display:-ms-flex; display: -webkit-flex">
    <div class="tori">
      <h2>Tori</h2>
      <div class="form-group">
        <label for="toriFirstName">First Name</label>
        <input type="text" required [(ngModel)]="tori.firstName" name="ToriFirstName" class="form-control"
               id="toriFirstName" placeholder="Enter First Name">
      </div>
      <div class="form-group">
        <label for="toriLastName">Last Name</label>
        <input type="text" required [(ngModel)]="tori.lastName" name="ToriLastName" class="form-control"
               id="toriLastName" placeholder="Enter Last Name">
      </div>
      <div class="form-group">
        <label for="toriLastName">Sex</label>
        <select required [(ngModel)]="tori.sex" name="ToriSex" class="form-control">
          <option value="M">Male</option>
          <option value="F">Female</option>
          <option value="O">Other</option>
        </select>
      </div>
      <div class="form-group">
        <label for="toriDob">Date of Birth</label>
        <div class="input-group">
          <input class="form-control"
                 type="date"
                 required
                 id="toriDob"
                 placeholder="yyyy-mm-dd"
                 name="toriDobDp"
                 [(ngModel)]="toriDobBs"
                 (ngModelChange)="dobSelect(tori, $event)"
                 ngbDatepicker
                 [minDate]="minDate"
                 [maxDate]="maxDate"
                 #d1="ngbDatepicker">
          <div class="input-group-append">
            <button class="btn btn-outline-secondary" (click)="d1.toggle()" type="button">
              <i class="fa fa-calendar" aria-hidden="true"></i>
            </button>
          </div>
        </div>
      </div>
      <div class="form-group">
        <label for="toriEmail">Email (age 18 and over)</label>
        <input type="email" appValidEmail [(ngModel)]="tori.email" name="ToriEmail" class="form-control" id="toriEmail"
               placeholder="Enter Email">
      </div>
      <div class="form-group">
        <label for="toriPhone">Phone #(age 18 and over)</label>
        <input type="tel" appValidPhone [(ngModel)]="tori.phone" name="ToriPhone" class="form-control" id="toriPhone"
               placeholder="Enter Phone #">
      </div>
    </div>
    <div class="uki">
      <h2>Uki</h2>
      <div class="form-group">
        <label for="ukiFirstName">First Name</label>
        <input type="text" required [(ngModel)]="uki.firstName" name="UkiFirstName" class="form-control"
               id="ukiFirstName" placeholder="Enter First Name">
      </div>
      <div class="form-group">
        <label for="ukiLastName">Last Name</label>
        <input type="text" required [(ngModel)]="uki.lastName" name="UkiLastName" class="form-control" id="ukiLastName"
               placeholder="Enter Last Name">
      </div>
      <div class="form-group">
        <label for="ukiLastName">Sex</label>
        <select required [(ngModel)]="uki.sex" name="UkiSex" class="form-control">
          <option value="M">Male</option>
          <option value="F">Female</option>
          <option value="O">Other</option>
        </select>
      </div>
      <div class="form-group">
        <label for="ukiDob">Date of Birth</label>
        <div class="input-group">
          <input type="date"
                 class="form-control"
                 required
                 id="ukiDob"
                 placeholder="yyyy-mm-dd"
                 name="ukiDobDp"
                 [(ngModel)]="ukiDobBs"
                 (ngModelChange)="dobSelect(uki, $event)"
                 ngbDatepicker
                 [minDate]="minDate"
                 [maxDate]="maxDate"
                 #d2="ngbDatepicker">
          <div class="input-group-append">
            <button class="btn btn-outline-secondary" (click)="d2.toggle()" type="button">
              <i class="fa fa-calendar" aria-hidden="true"></i>
            </button>
          </div>
        </div>
      </div>
      <div class="form-group">
        <label for="ukiEmail">Email (age 18 and over)</label>
        <input type="email" [(ngModel)]="uki.email" appValidEmail name="UkiEmail" class="form-control" id="ukiEmail"
               placeholder="Enter Email">
      </div>
      <div class="form-group">
        <label for="ukiPhone">Phone #(age 18 and over)</label>
        <input type="tel" [(ngModel)]="uki.phone" appValidPhone name="UkiPhone" class="form-control" id="ukiPhone"
               placeholder="Enter Phone #">
      </div>
    </div>
  </div>
  <div style="text-align:center;">
    <h2>Kata Selection (Max of 2)</h2>
    <div class="form-check" *ngFor="let cat of categories">
      <input class="form-check-input" type="checkbox" name="selectedCategories[]" (click)="categorySelected(cat)"
             value="{{cat.id}}">
      <label class="form-check-label">{{cat.label}}</label>
    </div>
  </div>
  <div style="text-align:center;margin-top:15px;margin-bottom:15px;">
    <button [disabled]="!kataForm.valid || selectedCategories.length == 0 || selectedCategories.length > 2" type="submit" class="btn btn-primary">Submit</button>
    <div class="error" *ngIf="submissionError">
      There was an error with your submission.  Please contact <a href="mailto:info@amcanjudo.org">info@amcanjudo.org</a>
    </div>
  </div>
</form>
